<!DOCTYPE html>
<html>
  <head>
    <title>CadeBuffet</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <%= stylesheet_link_tag "application" %>
  </head>

  <body class="py-3 bg-body-secondary">
    <header class="container text-center bg-body">
      <h1 class="py-3 m-0"><%= link_to 'CadÃª Buffet?', root_path, class: "link-underline link-underline-opacity-0 link-dark"  %></h1>
      <nav class="py-3">      
        <% if !admin_signed_in? && !customer_signed_in? %>
            <%= link_to "Entrar como cliente", new_customer_session_path , class: 'b-3 btn btn-primary' %>
            <%= link_to "Entrar como administrador", new_admin_session_path , class: 'b-3 btn btn-primary' %>
        <% end %>

        <% if admin_signed_in? %>
          Admin logado como: <%= current_admin.email %>
          <%= link_to 'Pedidos', orders_buffet_path(current_admin.buffet.id) if current_admin.buffet.present?%>
          <div class="mt-3">
            <%= button_to 'Sair', destroy_admin_session_path, class: "btn btn-danger", method: :delete %>
          </div>
        <% end %>

        <% if customer_signed_in? %>
          <%= current_customer.name %> | <%= current_customer.email %>
          <%= link_to 'Meus Pedidos', customer_path(current_customer) %>
          <div class="mt-3">
            <%= button_to 'Sair', destroy_customer_session_path, class: "btn btn-danger", method: :delete %>
          </div>
        <% end %>

        <% if !admin_signed_in? %>
          <div>
          <%= form_with(url: search_buffets_path, method: :get, class: 'm-3 row align-items-center justify-content-center') do |f| %>
              <%= f.label :query, 'Buscar Buffet', class: 'col-sm-2' %>
              <%= f.text_field :query, class: 'col-sm-3' %>
              <%= f.submit 'Buscar', class: 'b-3 btn btn-warning col-sm-1 mx-2' %>
          <% end %>  
          </div>
          
        <% end %>
      </nav>
    </header>
    <main class="container text-center bg-body px-5">
      <% if notice.present? %>
        <div class="alert alert-success" style="width: fit-content; margin:0 auto"><%= notice %></div>
      <% end %>
      <% if alert.present? %>
        <div class="alert alert-danger" style="width: fit-content; margin:0 auto"><%= alert %></div>
      <% end %>
      <%= yield %>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
